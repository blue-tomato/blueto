<script type="text/javascript">
  let currentId = "";

  setInterval(() => {
    const story = window.__STORYBOOK_PREVIEW__?.currentRender?.story;

    if (!story) return;

    const id = story.id;

    if (currentId === id) return;

    currentId = id;

    const links = story.parameters.links;

    document.querySelector(".docs-links")?.remove();

    if (!links) return;

    document.body.insertAdjacentHTML("beforeend", `
      <div class="docs-links">
        ${links.confluence ? `<a
          href="https://blue-tomato.atlassian.net/wiki/x/${links.confluence}"
          target="_blank"
          rel="noreferrer"
        >
          Confluence
        </a>` : ''}
        ${links.figma ? `<a
          href="https://www.figma.com/design/${links.figma}"
          target="_blank"
          rel="noreferrer"
        >
          Figma
        </a>` : ''}
      </div>
    `);
  }, 100);
</script>
